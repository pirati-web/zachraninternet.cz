function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function sumData(e,t){var a=0;for(var i in e)a+=e[i].data[t];return a}function preloadImages(e){var t=[];t["1x"]=new Image,t["2x"]=new Image,t["1x"].src=e,t["2x"].src=e.replace(/.png/gi,"@2x.png")}function renderPieChart(){var e=$("#pieChartSum"),t={labels:["Pro","Proti","Zdržel se"],datasets:[{data:[sumData(votingData,0),sumData(votingData,2),sumData(votingData,1)],backgroundColor:["#000000","#ffffff","#676767"],hoverBackgroundColor:["#000000","#ffffff","#676767"],borderWidth:[0,0,0],hoverBorderWidth:[0,0,0]}]},a={rotation:-.44*Math.PI,legend:{display:!1},tooltips:{},responsive:!0,plugins:{labels:{render:"percentage",fontSize:23,showZero:!0,fontStyle:"normal",fontFamily:"'Roboto', sans-serif",fontColor:function(e){var t=hexToRgb(e.dataset.backgroundColor[e.index]),a=140;return.299*t.r+.587*t.g+.114*t.b>140?"#000000":"#ffffff"},position:"border"},datalabels:{display:!1}}};e.ready(function(){var i=new Chart(e,{type:"pie",data:t,options:a})})}function renderBarChart(){function e(e,t){var a=[];for(var i in e)a.push(votingData[i].data[t]);return a}function t(e){var t=[];for(var a in e)t.push(e[a].name);return t}var a=$("#barChartParties"),i={labels:t(votingData),datasets:[{label:"Pro",backgroundColor:"#000000",hoverBackgroundColor:"#000000",data:e(votingData,0)},{label:"Zdržel se",backgroundColor:"#676767",hoverBackgroundColor:"#676767",data:e(votingData,1)},{label:"Proti",backgroundColor:"#ffffff",hoverBackgroundColor:"#ffffff",data:e(votingData,2)}]},n={legend:{display:!1},layout:{padding:0},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0,display:!1,barPercentage:0}],yAxes:[{stacked:!0,display:!1,barThickness:30,gridLines:{offsetGridLines:!1}}]},plugins:{labels:{},datalabels:{display:function(e){return e.dataset.data[e.dataIndex]>3},color:function(e){var t=hexToRgb(i.datasets[e.datasetIndex].backgroundColor),a=140;return.299*t.r+.587*t.g+.114*t.b>140?"#000000":"#ffffff"},anchor:function(e){return 0===e.datasetIndex?"start":2===e.datasetIndex?"end":"center"},align:function(e){return 0===e.datasetIndex?"right":2===e.datasetIndex?"left":"center"},font:{family:"'Roboto', sans-serif"},formatter:Math.round}}};a.ready(function(){var e=new Chart(a,{type:"horizontalBar",data:i,options:n})});var r=$("#barChartPartiesLegend");r.ready(function(){var e=0,t=function(e){setTimeout(function(){r.find(".barchart__legend__item").eq(e).addClass("barchart__legend__item--show")},50*e)};for(var a in votingData)r.append('<div class="barchart__legend__item"><span class="barchart__legend__item__name">'+votingData[a].name+'</span><img class="barchart__legend__item__image" src="./assets/images/app/parties/'+votingData[a].image.src+'" srcset="./assets/images/app/parties/'+votingData[a].image.src+", ./assets/images/app/parties/"+votingData[a].image.src.replace(/.png/gi,"@2x.png 2x")+'" alt="'+votingData[a].name+'" style="width: '+votingData[a].image.width+"px; height: "+votingData[a].image.height+'px;" ></div>'),t(e),e++})}function getSliderNewsSetting(e,t,a){return{auto:!0,pager:!1,caption:!1,prevText:"",nextText:"",speed:1e3,pause:1e4,responsive:!0,infiniteLoop:!0,hideControlOnEnd:!0,useCSS:!1,onSlideAfter:function(){isSliderNewsAnimation=!1},minSlides:t,maxSlides:a,slideWidth:e}}function getSliderTeamSetting(e){return{auto:!0,caption:!1,prevText:"",nextText:"",speed:500,pause:15e3,responsive:!0,infiniteLoop:!1,hideControlOnEnd:!0,useCSS:!1,minSlides:1,maxSlides:1,slideWidth:e,pagerCustom:"#pagerTeam"}}function getSliderAssociatesSetting(e){return{auto:!0,pager:!1,caption:!1,prevText:"",nextText:"",speed:500,pause:15e3,responsive:!0,infiniteLoop:!0,hideControlOnEnd:!0,useCSS:!1,minSlides:1,maxSlides:1,onSlideBefore:function(){$(".associates-pager__logo").removeClass("active"),$(".associates-pager__logo[data-slide-index='"+sliderAssociates.getCurrentSlide()+"']").addClass("active")},slideWidth:e}}var votingData={alde:{name:"ALDE/ADLE",image:{src:"alde-adle.png",width:26,height:23},data:[14,7,43]},acr:{name:"ECR",image:{src:"acr.png",width:22,height:22},data:[34,6,31]},efdd:{name:"EFDD",image:{src:"efdd.png",width:23,height:22},data:[2,4,34]},enf:{name:"ENF",image:{src:"enf.png",width:28,height:12},data:[16,0,16]},epp:{name:"EPP",image:{src:"epp.png",width:44,height:21},data:[192,3,11]},greens:{name:"Greens/EFA",image:{src:"green-efa.png",width:41,height:24},data:[10,0,40]},gue:{name:"GUE/NGL",image:{src:"gue-ngl.png",width:32,height:23},data:[3,8,36]},sad:{name:"S&D",image:{src:"s_and_d.png",width:25,height:25},data:[93,4,78]}},sliderNews,isSliderNewsAnimation,sliderTeam,sliderAssociates;window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#edeff5",text:"#838391"},button:{background:"#4b81e8"}},content:{message:"Webové stránky používají k poskytování služeb, personalizaci reklam a analýze návštěvnosti soubory cookie. Informace, jak tyto stránky používáte, sdílíme se svými partnery pro sociální média, inzerci a analýzy. Pro více informací o nastavení cookies najdete",dismiss:"Rozumím",link:"zde"}})}),$(document).ready(function(){for(var e in votingData)preloadImages("./assets/images/app/parties/"+votingData[e].image.src);$("#votingResults").waypoint({handler:function(){renderPieChart(),renderBarChart(),this.destroy()},offset:"90%"});var t=$("#sliderNews");isSliderNewsAnimation=!1,$(window).width()<=480?t.ready(function(){sliderNews=t.bxSlider(getSliderNewsSetting(248,1,1))}):$(window).width()<=640?t.ready(function(){sliderNews=t.bxSlider(getSliderNewsSetting(376,1,1))}):$(window).width()<=960?t.ready(function(){sliderNews=t.bxSlider(getSliderNewsSetting(504,1,1))}):$(window).width()<=1050?t.ready(function(){sliderNews=t.bxSlider(getSliderNewsSetting(380,1,2))}):t.ready(function(){sliderNews=t.bxSlider(getSliderNewsSetting(400,1,2))}),t.ready(function(){$("#sliderNewsPrev").click(function(){isSliderNewsAnimation||(isSliderNewsAnimation=!0,sliderNews.goToPrevSlide(),sliderNews.stopAuto(),sliderNews.startAuto())}),$("#sliderNewsNext").click(function(){isSliderNewsAnimation||(isSliderNewsAnimation=!0,sliderNews.goToNextSlide(),sliderNews.stopAuto(),sliderNews.startAuto())})});var a=$("#sliderTeam");a.ready(function(){sliderTeam=a.bxSlider(getSliderTeamSetting(1e3)),$(".team-pager__person").click(function(){sliderTeam.stopAuto()})});var i=$("#sliderAssociates");i.ready(function(){sliderAssociates=i.bxSlider(getSliderAssociatesSetting(1e3))}),$(".associates-pager__logo__image__wrap").click(function(){sliderAssociates.stopAuto();var e=$(this).parent().data("slide-index");sliderAssociates.goToSlide(e),sliderAssociates.startAuto()}),$("#copyButton").click(function(){$("#emailText").select(),document.execCommand("copy")})}),$(window).on("load",function(){}),$(window).on("orientationchange resize",function(){var e=$("#sliderNews"),t=$("#sliderTeam");$(window).width()<=480?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(248,1,1)),t.length&&sliderTeam.reloadSlider(getSliderTeamSetting(310))):e.length&&$(window).width()<=640?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(376,1,1)),t.length&&sliderTeam.reloadSlider(getSliderTeamSetting(470))):e.length&&$(window).width()<=960?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(504,1,1)),t.length&&sliderTeam.reloadSlider(getSliderTeamSetting(630))):e.length&&$(window).width()<=1050?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(380,1,2)),t.length&&sliderTeam.reloadSlider(getSliderTeamSetting(950))):e.length&&(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(400,1,2)),t.length&&sliderTeam.reloadSlider(getSliderTeamSetting(1e3)))});
