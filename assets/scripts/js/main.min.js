function hexToRgb(e){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function sumData(e,a){var t=0;for(var i in e)t+=e[i].data[a];return t}function preloadImages(e){var a=[];a["1x"]=new Image,a["2x"]=new Image,a["1x"].src=e,a["2x"].src=e.replace(/.png/gi,"@2x.png")}function renderPieChart(){var e=$("#pieChartSum"),a={labels:["Pro","Proti","Zdržel se"],datasets:[{data:[sumData(votingData,0),sumData(votingData,2),sumData(votingData,1)],backgroundColor:["#000000","#ffffff","#676767"],hoverBackgroundColor:["#000000","#ffffff","#676767"],borderWidth:[0,0,0],hoverBorderWidth:[0,0,0]}]},t={rotation:-.44*Math.PI,legend:{display:!1},tooltips:{},responsive:!0,plugins:{labels:{render:"percentage",fontSize:23,showZero:!0,fontStyle:"normal",fontFamily:"'Roboto', sans-serif",fontColor:function(e){var a=hexToRgb(e.dataset.backgroundColor[e.index]),t=140;return.299*a.r+.587*a.g+.114*a.b>140?"#000000":"#ffffff"},position:"border"},datalabels:{display:!1}}};e.ready(function(){var i=new Chart(e,{type:"pie",data:a,options:t})})}function renderBarChart(){function e(e,a){var t=[];for(var i in e)t.push(votingData[i].data[a]);return t}function a(e){var a=[];for(var t in e)a.push(e[t].name);return a}var t=$("#barChartParties"),i={labels:a(votingData),datasets:[{label:"Pro",backgroundColor:"#000000",hoverBackgroundColor:"#000000",data:e(votingData,0)},{label:"Zdržel se",backgroundColor:"#676767",hoverBackgroundColor:"#676767",data:e(votingData,1)},{label:"Proti",backgroundColor:"#ffffff",hoverBackgroundColor:"#ffffff",data:e(votingData,2)}]},n={legend:{display:!1},layout:{padding:0},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0,display:!1,barPercentage:0}],yAxes:[{stacked:!0,display:!1,barThickness:30,gridLines:{offsetGridLines:!1}}]},plugins:{labels:{},datalabels:{display:function(e){return e.dataset.data[e.dataIndex]>3},color:function(e){var a=hexToRgb(i.datasets[e.datasetIndex].backgroundColor),t=140;return.299*a.r+.587*a.g+.114*a.b>140?"#000000":"#ffffff"},anchor:function(e){return 0===e.datasetIndex?"start":2===e.datasetIndex?"end":"center"},align:function(e){return 0===e.datasetIndex?"right":2===e.datasetIndex?"left":"center"},font:{family:"'Roboto', sans-serif"},formatter:Math.round}}};t.ready(function(){var e=new Chart(t,{type:"horizontalBar",data:i,options:n})});var r=$("#barChartPartiesLegend");r.ready(function(){var e=0,a=function(e){setTimeout(function(){r.find(".barchart__legend__item").eq(e).addClass("barchart__legend__item--show")},50*e)};for(var t in votingData)r.append('<div class="barchart__legend__item"><span class="barchart__legend__item__name">'+votingData[t].name+'</span><img class="barchart__legend__item__image" src="./assets/images/app/parties/'+votingData[t].image.src+'" srcset="./assets/images/app/parties/'+votingData[t].image.src+", ./assets/images/app/parties/"+votingData[t].image.src.replace(/.png/gi,"@2x.png 2x")+'" alt="'+votingData[t].name+'" style="width: '+votingData[t].image.width+"px; height: "+votingData[t].image.height+'px;" ></div>'),a(e),e++})}function getSliderNewsSetting(e,a,t){return{auto:!0,pager:!1,caption:!1,prevText:"",nextText:"",speed:1e3,pause:1e4,responsive:!0,infiniteLoop:!0,hideControlOnEnd:!0,useCSS:!1,onSlideAfter:function(){isSliderNewsAnimation=!1},minSlides:a,maxSlides:t,slideWidth:e}}function getSliderTeamSetting(e){return{auto:!0,caption:!1,prevText:"",nextText:"",speed:500,pause:15e3,responsive:!0,infiniteLoop:!1,hideControlOnEnd:!0,useCSS:!1,minSlides:1,maxSlides:1,slideWidth:e,pagerCustom:"#pagerTeam"}}function getSliderAssociatesSetting(e){return{auto:!0,pager:!1,caption:!1,prevText:"",nextText:"",speed:500,pause:15e3,responsive:!0,infiniteLoop:!0,hideControlOnEnd:!0,useCSS:!1,minSlides:1,maxSlides:1,onSlideBefore:function(){$(".associates-pager__logo").removeClass("active"),$(".associates-pager__logo[data-slide-index='"+sliderAssociates.getCurrentSlide()+"']").addClass("active")},slideWidth:e}}function renderMap(){var e=new L.StamenTileLayer("toner"),a=L.map("FreedomMap").setView([49.8250074,15.4749003],7),t=L.icon({iconUrl:"assets/images/app/map/map-icon.png",iconSize:[30,50],iconAnchor:[15,49]});L.marker([50.073247,14.414518],{icon:t}).addTo(a),L.marker([49.195098,16.608022],{icon:t}).addTo(a),L.marker([48.974796,14.474014],{icon:t}).addTo(a),L.marker([49.39623,15.59017],{icon:t}).addTo(a),L.marker([50.770179,15.058607],{icon:t}).addTo(a),L.marker([49.592531,17.252344],{icon:t}).addTo(a),L.marker([49.836028,18.292755],{icon:t}).addTo(a),L.marker([50.037839,15.777308],{icon:t}).addTo(a),L.marker([49.747238,13.377496],{icon:t}).addTo(a),L.marker([50.660247,14.040576],{icon:t}).addTo(a),L.marker([50.209197,15.832629],{icon:t}).addTo(a),a.addLayer(e)}var votingData={alde:{name:"ALDE/ADLE",image:{src:"alde-adle.png",width:26,height:23},data:[36,3,25]},acr:{name:"ACR",image:{src:"acr.png",width:22,height:22},data:[23,2,42]},efdd:{name:"EFDD",image:{src:"efdd.png",width:23,height:22},data:[6,1,28]},enf:{name:"ENF",image:{src:"enf.png",width:28,height:12},data:[15,3,14]},epp:{name:"EPP",image:{src:"epp.png",width:44,height:21},data:[153,13,28]},greens:{name:"Greens/EFA",image:{src:"green-efa.png",width:41,height:24},data:[4,4,39]},gue:{name:"GUE/NGL",image:{src:"gue-ngl.png",width:32,height:23},data:[5,3,36]},sad:{name:"S&D",image:{src:"s_and_d.png",width:25,height:25},data:[99,6,54]}},sliderNews,isSliderNewsAnimation,sliderTeam,sliderAssociates;window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#edeff5",text:"#838391"},button:{background:"#4b81e8"}},content:{message:"Webové stránky používají k poskytování služeb, personalizaci reklam a analýze návštěvnosti soubory cookie. Informace, jak tyto stránky používáte, sdílíme se svými partnery pro sociální média, inzerci a analýzy. Pro více informací o nastavení cookies najdete",dismiss:"Rozumím",link:"zde"}})}),$(document).ready(function(){for(var e in votingData)preloadImages("./assets/images/app/parties/"+votingData[e].image.src);$("#votingResults").waypoint({handler:function(){renderPieChart(),renderBarChart(),this.destroy()},offset:"90%"});var a=$("#sliderNews");isSliderNewsAnimation=!1,$(window).width()<=480?a.ready(function(){sliderNews=a.bxSlider(getSliderNewsSetting(248,1,1))}):$(window).width()<=640?a.ready(function(){sliderNews=a.bxSlider(getSliderNewsSetting(376,1,1))}):$(window).width()<=960?a.ready(function(){sliderNews=a.bxSlider(getSliderNewsSetting(504,1,1))}):$(window).width()<=1050?a.ready(function(){sliderNews=a.bxSlider(getSliderNewsSetting(380,1,2))}):a.ready(function(){sliderNews=a.bxSlider(getSliderNewsSetting(400,1,2))}),a.ready(function(){$("#sliderNewsPrev").click(function(){isSliderNewsAnimation||(isSliderNewsAnimation=!0,sliderNews.goToPrevSlide(),sliderNews.stopAuto(),sliderNews.startAuto())}),$("#sliderNewsNext").click(function(){isSliderNewsAnimation||(isSliderNewsAnimation=!0,sliderNews.goToNextSlide(),sliderNews.stopAuto(),sliderNews.startAuto())})});var t=$("#sliderTeam");t.ready(function(){sliderTeam=t.bxSlider(getSliderTeamSetting(1e3)),$(".team-pager__person").click(function(){sliderTeam.stopAuto()})});var i=$("#sliderAssociates");i.ready(function(){sliderAssociates=i.bxSlider(getSliderAssociatesSetting(1e3))}),$(".associates-pager__logo__image__wrap").click(function(){sliderAssociates.stopAuto();var e=$(this).parent().data("slide-index");sliderAssociates.goToSlide(e),sliderAssociates.startAuto()}),$("#copyButton").click(function(){$("#emailText").select(),document.execCommand("copy")}),$("#FreedomMap").length&&$("#FreedomMap").ready(function(){renderMap()})}),$(window).on("load",function(){}),$(window).on("orientationchange resize",function(){var e=$("#sliderNews"),a=$("#sliderTeam");$(window).width()<=480?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(248,1,1)),a.length&&sliderTeam.reloadSlider(getSliderTeamSetting(310))):e.length&&$(window).width()<=640?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(376,1,1)),a.length&&sliderTeam.reloadSlider(getSliderTeamSetting(470))):e.length&&$(window).width()<=960?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(504,1,1)),a.length&&sliderTeam.reloadSlider(getSliderTeamSetting(630))):e.length&&$(window).width()<=1050?(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(380,1,2)),a.length&&sliderTeam.reloadSlider(getSliderTeamSetting(950))):e.length&&(e.length&&sliderNews.reloadSlider(getSliderNewsSetting(400,1,2)),a.length&&sliderTeam.reloadSlider(getSliderTeamSetting(1e3)))});